<div id="registro_container">
    <form [formGroup]="userForm" class="ng-invalid">
        <div id="nombre_container" name="registro_form_input" [ngClass]="{'invalid-input': isValidControl('nombre')}">
            <label for="nombre">Nombre</label>
            <input id="nombre" pInputText type="text" formControlName="nombre" />

            <ng-container *ngIf='getControl("nombre")?.hasError("required")'>
                <small class="text-danger">
                    Debe completar este campo.
                </small>
            </ng-container>

            <ng-container *ngIf='getControl("nombre")?.hasError("pattern")'>
                <small class="text-danger">
                    Sólo se adminten letras.
                </small>
            </ng-container>
        </div>

        <div id="apellido_container" name="registro_form_input"
            [ngClass]="{'invalid-input': isValidControl('apellido')}">
            <label for="apellido">Apellido</label>
            <input id="apellido" pInputText type="text" formControlName="apellido" />

            <ng-container *ngIf='getControl("apellido")?.hasError("required")'>
                <small class="text-danger">
                    Debe completar este campo.
                </small>
            </ng-container>

            <ng-container *ngIf='getControl("apellido")?.hasError("pattern")'>
                <small class="text-danger">
                    Sólo se adminten letras.
                </small>
            </ng-container>
        </div>

        <div id="edad_container" name="registro_form_input" [ngClass]="{'invalid-input': isValidControl('edad')}">
            <label for="edad">Edad</label>
            <!-- <input id="edad" type="number" formControlName="edad" /> -->
            <p-inputNumber inputId="edad" inputStyleClass="w-full" styleClass="w-full" formControlName="edad" [min]="1"
                [max]="200" [maxlength]="3" [useGrouping]="false"></p-inputNumber>

            <ng-container *ngIf='getControl("edad")?.hasError("required")'>
                <small class="text-danger">
                    Debe completar este campo.
                </small>
            </ng-container>
        </div>

        <div id="dni_container" name="registro_form_input" [ngClass]="{'invalid-input': isValidControl('dni')}">
            <label for="dni">DNI</label>
            <!-- <input pInputNumber id="dni" type="number" formControlName="dni" maxlength="8" /> -->
            <p-inputNumber inputId="dni" inputStyleClass="w-full" styleClass="w-full" formControlName="dni"
                [min]="10000000" [max]="99999999" [maxlength]="8" [useGrouping]="false"></p-inputNumber>

            <ng-container *ngIf='getControl("dni")?.hasError("required")'>
                <small class="text-danger">
                    Debe completar este campo.
                </small>
            </ng-container>

            <ng-container *ngIf='getControl("dni")?.hasError("pattern")'>
                <small class="text-danger">
                    Su DNI deben ser 8 dígitos.
                </small>
            </ng-container>

            <ng-container *ngIf='getControl("dni")?.hasError("existeDNI")'>
                <small class="text-danger">
                    Ese DNI ya está registrado.
                </small>
            </ng-container>
        </div>

        <div id="email_container" name="registro_form_input" [ngClass]="{'invalid-input': isValidControl('email')}">
            <label for="mail">Correo electrónico</label>
            <input id="mail" pInputText type="email" formControlName="email" />

            <ng-container *ngIf='getControl("email")?.hasError("required")'>
                <small class="text-danger">
                    Debe completar este campo.
                </small>
            </ng-container>

            <ng-container *ngIf='getControl("email")?.hasError("email")'>
                <small class="text-danger">
                    Formato inválido.
                </small>
            </ng-container>

            <ng-container *ngIf='getControl("email")?.hasError("existeMail")'>
                <small class="text-danger">
                    Ese email ya está registrado.
                </small>
            </ng-container>
        </div>

        <div id="clave_container" name="registro_form_input" [ngClass]="{'invalid-input': isValidControl('clave')}">
            <label for="clave">Contraseña</label>
            <!-- <input id="clave" type="password" formControlName="clave" /> -->
            <p-password id="clave" formControlName="clave" inputStyleClass="w-full" styleClass="w-full"
                [feedback]="false" [toggleMask]="true"></p-password>

            <ng-container *ngIf='getControl("clave")?.hasError("required")'>
                <small class="text-danger">
                    Debe completar este campo.
                </small>
            </ng-container>

            <ng-container *ngIf='getControl("clave")?.hasError("minlength")'>
                <small class="text-danger">
                    La clave debe tener mínimo {{getControl("clave")?.getError('minlength').requiredLength}} caracteres
                </small>
            </ng-container>
        </div>

        <div id="clave2_container" name="registro_form_input" [ngClass]="{'invalid-input': isValidControl('clave2')}">
            <label for="clave2">Repita la contraseña</label>
            <!-- <input id="clave2" type="password" formControlName="clave2" /> -->
            <p-password id="clave2" formControlName="clave2" inputStyleClass="w-full" styleClass="w-full"
                [feedback]="false" [toggleMask]="true"></p-password>

            <ng-container *ngIf='getControl("clave2")?.hasError("required")'>
                <small class="text-danger">
                    Debe completar este campo.
                </small>
            </ng-container>

            <ng-container *ngIf='getControl("clave2")?.hasError("noCoincide")'>
                <small class="text-danger">
                    Las contraseñas no coinciden.
                </small>
            </ng-container>
        </div>

        <div id="url_foto_1_container" name="registro_form_input"
            [ngClass]="{'invalid-input': isValidControl('url_foto_1')}">
            <label for="url_foto_1">Imagen de perfil 1</label>
            <input id="url_foto_1" type="file" formControlName="url_foto_1" (change)="fileChange($event, 1)" />

            <ng-container *ngIf='getControl("url_foto_1")?.hasError("required")'>
                <small class="text-danger">
                    Debe completar este campo.
                </small>
            </ng-container>
        </div>

        <div id="url_foto_2_container" name="registro_form_input" *ngIf="tipo_usuario == 'paciente'"
            [ngClass]="{'invalid-input': isValidControl('url_foto_2')}">
            <label for="url_foto_2">Imagen de perfil 2</label>
            <input id="url_foto_2" type="file" formControlName="url_foto_2" (change)="fileChange($event, 2)" />

            <ng-container *ngIf='getControl("url_foto_2")?.hasError("required")'>
                <small class="text-danger">
                    Debe completar este campo.
                </small>
            </ng-container>
        </div>

        <div id="obra_social_container" name="registro_form_input" *ngIf="tipo_usuario == 'paciente'"
            [ngClass]="{'invalid-input': isValidControl('obra_social')}">
            <label for="obra_social">Obra Social</label>
            <!-- <input id="obra_social" pInputText type="text" formControlName="obra_social" /> -->
            <p-dropdown formControlName="obra_social" styleClass="w-full" [options]="obras_sociales"
                optionLabel="nombre"></p-dropdown>

            <ng-container *ngIf='getControl("obra_social")?.hasError("required")'>
                <small class="text-danger">
                    Debe completar este campo.
                </small>
            </ng-container>
        </div>

        <div id="especialidad_panel">
            <div id="especialidades_container" *ngIf="tipo_usuario == 'especialista'"
                [ngClass]="{'invalid-input': isValidControl('especialidades')}">
                <label for="especialidades">Especialidades</label>
                <p-multiSelect [options]="especialidades" styleClass="w-full" formControlName="especialidades"
                    defaultLabel="Selecione sus especialidades" optionLabel="nombre"
                    selectedItemsLabel="{0} seleccionadas" appendTo="body"></p-multiSelect>

                <ng-container *ngIf='getControl("especialidades")?.hasError("required")'>
                    <small class="text-danger">
                        Debe completar este campo.
                    </small>
                </ng-container>
            </div>

            <div id="agregar_especialidad_container" *ngIf="tipo_usuario == 'especialista'">
                <label for="agregar_especialidad">Si no está su especialidad:</label>
                <div class="p-inputgroup">
                    <input id="agregar_especialidad" pInputText type="text" placeholder="Nueva especialidad"
                        [(ngModel)]="agregar_especialidad" [ngModelOptions]="{standalone: true}" />
                    <button type="button" pButton pRipple label="Agregar" (click)="AgregarEspecialidad()"></button>
                </div>
            </div>
        </div>


        <div id="submit_container">
            <button pButton type="submit" class="btn btn-primary" [disabled]="!this.userForm.valid"
                (click)="RegistrarUsuario()">Registrar</button>
            <!-- <button class="btn btn-primary" (click)="logForm()">LogForm</button> -->
            <!-- <div>{{this.userForm.errors | json}}</div> -->
            <!-- <div>Form válido: {{this.userForm.valid}}</div> -->
        </div>

    </form>
</div>